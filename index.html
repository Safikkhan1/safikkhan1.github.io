<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>My Love Magazine</title>

<!-- Quill (free editor) -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --primary:#ff3b30;
    --accent:#ff8577;
    --bg:#fafafa;
    --card:#ffffff;
    --text:#222;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Roboto,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
  a{color:var(--primary);text-decoration:none}
  header.top {
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:#fff;padding:28px 20px;text-align:center;
  }
  header.top h1{margin:0;font-size:2.2rem}
  header.top p{margin:6px 0 0;opacity:.95}

  /* NAV */
  nav.site-nav{display:flex;justify-content:center;gap:18px;padding:12px 10px;background:#fff;border-bottom:1px solid #eee;position:sticky;top:0;z-index:40}
  nav.site-nav a{font-weight:700;color:#333;padding:8px 12px;border-radius:8px}
  nav.site-nav a:hover{background:#f3f3f3}

  /* HERO - full width big */
  .hero{
    position:relative;height:520px;display:flex;align-items:center;justify-content:center;
    color:#fff;text-align:center;overflow:hidden;
  }
  .hero::before{
    content:"";
    position:absolute;inset:0;
    background-image: url('https://images.unsplash.com/photo-1508919801845-fc2ae1bc0a1d?auto=format&fit=crop&w=2000&q=80');
    background-size:cover;background-position:center;
    transform:scale(1.05);
    filter:brightness(.6);
  }
  .hero .inner{position:relative;z-index:2;max-width:1100px;padding:20px}
  .hero h2{font-size:3rem;margin:0 0 8px;letter-spacing:0.2px}
  .hero p{font-size:1.05rem;margin:0 0 18px;opacity:.95}
  .hero .cta{background:#fff;color:var(--primary);padding:12px 20px;border-radius:10px;font-weight:700}

  /* MAIN LAYOUT */
  main.container{max-width:1200px;margin:28px auto;padding:0 18px}

  /* Featured grid - big images */
  .featured-grid{
    display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-bottom:22px;
  }
  .feature-card{
    background:var(--card);border-radius:12px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.06);
    display:flex;flex-direction:column;
  }
  .feature-card .thumb{height:260px;background:#ddd;background-size:cover;background-position:center}
  .feature-card .meta{padding:14px}
  .feature-card h3{margin:0 0 8px;color:var(--primary);font-size:1.15rem}
  .feature-card p{margin:0;color:#444;line-height:1.45;font-size:0.95rem}

  /* editor card big */
  .editor-card{margin-bottom:20px;padding:18px;border-radius:12px;background:var(--card);box-shadow:0 8px 20px rgba(0,0,0,0.04)}
  .editor-row{display:flex;gap:12px;flex-wrap:wrap}
  .editor-row input[type="text"]{flex:1;padding:10px;border-radius:8px;border:1px solid #e6e6e6}

  button.publish{
    background:var(--primary);color:#fff;border:0;padding:10px 16px;border-radius:9px;font-weight:700;cursor:pointer;margin-top:10px
  }
  button.publish:hover{opacity:.95}

  /* Post list (large single column) */
  .post-list{display:flex;flex-direction:column;gap:18px}
  .post-card{
    background:var(--card);border-radius:12px;padding:18px;box-shadow:0 8px 24px rgba(0,0,0,0.05)
  }
  .post-card img{width:100%;height:auto;border-radius:10px;display:block;margin-bottom:12px;object-fit:cover}

  /* Sidebar right */
  .layout{display:grid;grid-template-columns:2fr 1fr;gap:22px}
  .sidebar .card{padding:14px;border-radius:12px;background:var(--card);box-shadow:0 8px 24px rgba(0,0,0,0.04)}
  .ad-box{min-height:140px;border-radius:10px;border:2px dashed #eee;display:flex;align-items:center;justify-content:center;color:#888}

  /* lightbox modal */
  .lightbox{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:120}
  .lightbox img{max-width:95%;max-height:90%;border-radius:8px;box-shadow:0 20px 60px rgba(0,0,0,0.6)}

  footer{max-width:1200px;margin:28px auto;padding:24px 18px;text-align:center;color:#666}

  /* responsive */
  @media(max-width:1100px){ .featured-grid{grid-template-columns:repeat(2,1fr)} .hero{height:420px} }
  @media(max-width:700px){
    .layout{grid-template-columns:1fr}
    .featured-grid{grid-template-columns:1fr}
    .hero{height:320px}
    .hero h2{font-size:1.8rem}
  }
</style>
</head>
<body>

<header class="top">
  <h1>My Love Magazine</h1>
  <p>Big images • Big stories • Simple editor</p>
</header>

<nav class="site-nav">
  <a href="#home">Home</a>
  <a href="#compose">Compose</a>
  <a href="#contact">Contact</a>
</nav>

<!-- HERO -->
<section class="hero" id="home" aria-label="hero banner">
  <div class="inner">
    <h2>Large Photos. Bigger Emotions.</h2>
    <p>Create photo-rich posts that look like a magazine — full-width banner and big featured cards.</p>
    <a class="cta" href="#compose">Create Post</a>
  </div>
</section>

<main class="container">
  <!-- featured -->
  <div class="featured-grid" id="featuredGrid">
    <!-- JS will inject featured items here -->
  </div>

  <!-- layout: editor + posts + sidebar -->
  <div class="layout">
    <section>
      <!-- editor -->
      <div id="compose" class="editor-card editor-card card">
        <h3 style="margin-top:0">Compose post (photo + text)</h3>
        <div class="editor-row">
          <input id="title" type="text" placeholder="Post title — big and catchy" />
          <input id="imageFile" type="file" accept="image/*" />
        </div>
        <div id="editor" style="height:280px;margin-top:12px;background:#fff;border-radius:8px"></div>
        <button class="publish" id="publishBtn">Publish (Show Big)</button>
      </div>

      <!-- posts list -->
      <div class="post-list" id="postList">
        <!-- published posts appear here -->
      </div>
    </section>

    <aside class="sidebar">
      <div class="card">
        <h4 style="margin-top:0">About</h4>
        <p style="margin:0;color:#444">This is a magazine-style layout with big photos. Click any image to enlarge. Paste AdSense code in the Ad box below.</p>
      </div>

      <div class="card" style="margin-top:16px">
        <div class="ad-box" id="adBox">Google AdSense area — paste your ad code here</div>
      </div>

      <div class="card" style="margin-top:16px">
        <h4 style="margin-top:0">Categories</h4>
        <ul style="margin:0;padding-left:18px;color:#444">
          <li>Featured</li>
          <li>Love Stories</li>
          <li>Photography</li>
          <li>Inspiration</li>
        </ul>
      </div>
    </aside>
  </div>
</main>

<!-- lightbox -->
<div class="lightbox" id="lightbox" onclick="closeLightbox()"><img id="lightboxImg" src="" alt="large image"/></div>

<footer>
  © 2025 My Love Magazine — All rights reserved.
</footer>

<!-- Quill JS -->
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
<script>
  // init Quill editor
  const quill = new Quill('#editor', { theme: 'snow' });

  const titleEl = document.getElementById('title');
  const imgEl = document.getElementById('imageFile');
  const publishBtn = document.getElementById('publishBtn');
  const postList = document.getElementById('postList');
  const featuredGrid = document.getElementById('featuredGrid');

  // load existing posts from localStorage (persist)
  const saved = JSON.parse(localStorage.getItem('mag_posts') || '[]');
  function renderAll(){
    postList.innerHTML = '';
    featuredGrid.innerHTML = '';
    // saved is array of {title,content,img,featured}
    saved.forEach((p, idx) => {
      addPostToDOM(p, false);
    });
    // create top 3 featured if available (latest 3)
    const featured = saved.slice(0,3);
    featured.forEach(p => addFeatured(p));
  }
  renderAll();

  function addFeatured(postData){
    const card = document.createElement('div');
    card.className = 'feature-card';
    const thumbUrl = postData.img || 'https://images.unsplash.com/photo-1508921912186-1d1a45ebb3c1?auto=format&fit=crop&w=1600&q=80';
    card.innerHTML = `
      <div class="thumb" style="background-image:url('${thumbUrl}')"></div>
      <div class="meta">
        <h3>${escapeHtml(postData.title)}</h3>
        <p>${stripText(postData.content,120)}</p>
      </div>
    `;
    card.querySelector('.thumb').addEventListener('click', ()=> openLightbox(thumbUrl));
    featuredGrid.prepend(card);
  }

  function addPostToDOM(postData, save=true){
    // post card with big image and content
    const card = document.createElement('article');
    card.className = 'post-card';
    card.innerHTML = `
      ${postData.img ? `<img src="${postData.img}" alt="${escapeHtml(postData.title)}">` : ''}
      <h2 style="color:var(--primary);margin:8px 0 6px">${escapeHtml(postData.title)}</h2>
      <div class="content">${postData.content}</div>
      <div style="margin-top:12px;color:#777;font-size:13px">Posted just now</div>
    `;
    // image click -> lightbox
    const imgTag = card.querySelector('img');
    if(imgTag) imgTag.addEventListener('click', ()=> openLightbox(imgTag.src));

    // add to top of list
    postList.prepend(card);
    // also add to featured grid (as latest)
    addFeatured(postData);

    if(save){
      saved.unshift(postData); // latest first
      localStorage.setItem('mag_posts', JSON.stringify(saved));
    }
  }

  publishBtn.addEventListener('click', ()=>{
    const title = (titleEl.value || '').trim();
    const content = quill.root.innerHTML.trim();
    if(!title || !content || content === '<p><br></p>'){ alert('Please enter title and content'); return; }

    const file = imgEl.files && imgEl.files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = e => {
        const postData = { title, content, img: e.target.result };
        addPostToDOM(postData, true);
        clearForm();
      };
      reader.readAsDataURL(file);
    } else {
      const postData = { title, content, img: '' };
      addPostToDOM(postData, true);
      clearForm();
    }
  });

  function clearForm(){ titleEl.value=''; quill.setContents([]); imgEl.value=''; }

  // lightbox controls
  function openLightbox(src){
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightboxImg');
    lbImg.src = src;
    lb.style.display = 'flex';
  }
  function closeLightbox(){ const lb=document.getElementById('lightbox'); lb.style.display='none'; }

  // helpers
  function stripText(html, len){ // returns plain text truncated
    const tmp = document.createElement('div'); tmp.innerHTML = html;
    const txt = tmp.textContent || tmp.innerText || '';
    return txt.length>len ? txt.slice(0,len).trim()+'...' : txt;
  }
  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  // allow clicking featured image to open lightbox (initial saved ones)
  // initial saved already rendered in renderAll()

</script>
</body>
</html>
